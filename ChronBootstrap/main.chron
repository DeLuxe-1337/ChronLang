include core.all
include ir.all

GenerateBasicFunction :: (name) {
    block = IR.CreateBlock()
    IR.Block.Append(block, IR.CreateInvoke("printf", <IR.CreateString("Hello, world")>))

    return IR.CreateFunction(name, block, nil)
}

Main :: {
    PrintLn("Writing basic function")

    IR.Write(GenerateBasicFunction("main"))

    PrintLn("Writing to file")

    IR.Writer.WriteToFile("out.chron_test.c")

    PrintLn("End of program")

    Memory.ReleaseAll()
}